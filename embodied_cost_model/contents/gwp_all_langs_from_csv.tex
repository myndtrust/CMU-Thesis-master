\definecolor{chinese}{rgb}{0, 1, 0} %chinese 
\definecolor{english}{rgb}{0, 0, 1}%english 
\definecolor{french}{rgb}{.8, 0, 0}%french 
\definecolor{german}{rgb}{.5, .5, .5}%german 
\definecolor{japanese}{rgb}{0, 0, .5}%japanese 
\definecolor{russian}{rgb}{0, .5, 0}%russian 
\definecolor{spanish}{rgb}{0, .25, .5}%spanish 

\pgfplotsset{compat=1.7}


% PGFPlots Settings
\pgfplotsset{
SmallBarPlot/.style={
    font=\footnotesize,
    ybar,
    width=\linewidth,
    ymin=0,
    xtick=data,
    xticklabel style={text width=1.5cm, rotate=45, align=center}
},
chineseBars/.style={
    fill=chinese, bar width=0.1
},
englishBars/.style={
    fill=english, bar width=0.1
},
frenchBars/.style={
    fill=french, bar width=0.1
},
germanBars/.style={
    fill=german, bar width=0.1
},
spanishBars/.style={
    fill=spanish, bar width=0.1
},
japaneseBars/.style={
    fill=japanese, bar width=0.1
},
russianBars/.style={
    fill=russian, bar width=0.1
}
}

\DeclareRobustCommand\legendbox[1]{(\textcolor{#1}{#1}~\begin{tikzpicture}[x=0.2cm, y=0.2cm] \draw [color=black, fill=#1!20] (0,0) -- (0,1) -- (0.6,1) -- (0.6,0) -- (0, 0); \end{tikzpicture})}

\pgfplotsset{select coords between index/.style 2 args={
    x filter/.code={
        \ifnum\coordindex<#1\def\pgfmathresult{}\fi
        \ifnum\coordindex>#2\def\pgfmathresult{}\fi
    }
}}

\begin{figure}
    \centering
\pgfplotstableread[col sep=comma,]{embodied_cost_model/contents/data/gcc_all_langs.csv}\datatable
\begin{tikzpicture}
\begin{axis}[
    ybar,
    bar width=.1cm,
    width=\textwidth,
    height=7cm,
    ymin = 0,
    xtick=data,
    enlarge x limits=0.1,
    xticklabels from table={\datatable}{Site},
    x tick label style={font=\normalsize, rotate=45, anchor=east},
    ylabel={kg $CO^2$ Eq.}]
    \addplot [germanBars] table [x expr=\coordindex, y=de]{\datatable};
    \addplot [englishBars] table [x expr=\coordindex, y=en]{\datatable};
    \addplot [spanishBars] table [x expr=\coordindex, y=es]{\datatable};
    \addplot [frenchBars] table [x expr=\coordindex, y=fr]{\datatable};
    \addplot [chineseBars] table [x expr=\coordindex, y=zh]{\datatable};
    \addplot [russianBars] table [x expr=\coordindex, y=ru]{\datatable};
    \addplot [japaneseBars] table [x expr=\coordindex, y=ja]{\datatable};
\end{axis}

   \begin{scope}[xshift=-1.125cm, yshift=-2.25cm]
            \node [anchor=center] (chinese) at (2,-.6) {\small{Chinese}};
            \filldraw[outer color=chinese, inner color=chinese] (1.8,-.4) rectangle (2.2,0); % chinese
            
            \node [anchor=center] (english) at (4,-.6) {\small{English}};
            \filldraw[outer color=english, inner color=english] (3.8,-.4) rectangle (4.2,0); % english
            
            \node [anchor=center] (french) at (6,-.6) {\small{French}};
            \filldraw[outer color=french, inner color=french] (5.8,-.4) rectangle (6.2,0); % french
            
            \node [anchor=center] (german) at (8,-.6) {\small{German}};
            \filldraw[outer color=german, inner color=german] (7.8,-.4) rectangle (8.2,0); % german
            
            \node [anchor=center] (japanese) at (10,-.6) {\small{Japanese}};
            \filldraw[outer color=japanese, inner color=japanese] (9.8,-.4) rectangle (10.2,0); % japanese
            
            \node [anchor=center] (russian) at (12,-.6) {\small{Russian}};
            \filldraw[outer color=russian, inner color=russian] (11.8,-.4) rectangle (12.2,0); % russian
            
            \node [anchor=center] (spanish) at (14,-.6) {\small{Spanish}};
            \filldraw[outer color=spanish, inner color=spanish] (13.8,-.4) rectangle (14.2,0); % spanish
            
            
            \end{scope}
\end{tikzpicture}
\caption[TRACI GCC for English]{TRACI Impact Potential for All Language \\ Global Climate Change}
\label{fig:traci_gcc_english}
\end{figure}